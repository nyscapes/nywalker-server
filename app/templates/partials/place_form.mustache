<div class="row">
  <div class="col-md-6">
    <form id="searchPlace" action="/search-place" method="POST">
      <div class="form-group">
        <label for="inputSearch">Search</label>
        <div class="input-group">
          <input type="text" class="form-control input-sm" name="search" placeholder="" value="" aria-describedby="searchHelpBlock" id="inputSearch">
          <span class="input-group-btn">
            <button class="btn btn-sm btn-default" type="submit" id="searchButton">Search gazetteer</button>
          </span>
        </div>
        <span id="searchHelpBlock" class="help-block">First, try to search for your place.</span>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" name="us_bias"> <small>Bias results to the United States?</small>
        </label>
      </div>
      <div class="checkbox">
        <label>
          <input type="checkbox" name="nyc_limit"> <small>Limit results to NYC?</small>
        </label>
      </div>
    </form>
    <form action="/places/add" method="POST" id="addPlace">
      <div class="form-group">
        <label for="inputName">Name</label>
        <input type="text" class="form-control input-sm" name="name" placeholder="" value="" aria-describedby="nameHelpBlock" id="inputName">
        <span id="nameHelpBlock" class="help-block">Descriptive, unique, yet short. “Paris, TX” works, as does “Church Street, NYC.”</span>
      </div>
      <div class="form-group">
        <label for="inputLat">Latitude (<em>y</em>)</label>
        <input type="text" class="form-control input-sm" name="lat" placeholder="" value="" id="inputLat">
      </div>
      <div class="form-group">
        <label for="inputLon">Longitude (<em>x</em>)</label>
        <input type="text" class="form-control input-sm" name="lon" placeholder="" value="" id="inputLon">
      </div>
      <div class="form-group">
        <label for="inputSource">Source</label>
        <input type="text" class="form-control input-sm" name="source" placeholder="" value="" id="inputSource" aria-describedby="sourceHelpBlock">
        <span id="sourceHelpBlock" class="help-block">Coordinates source, like “GeoNames,” or a <em>Wikipedia</em> article url.</span>
      </div>
      <div class="form-group">
        <label for="inputConfidence">Confidence</label>
        <select class="form-control input-sm" name="confidence" id="inputConfidence" aria-describedby="confidenceHelpBlock">
          <option value="3">Very confident this is the place.</option>
          <option value="2" selected>Mostly confident this is the place.</option>
          <option value="1">Not very sure this is the place.</option>
          <option value="0">Can’t find the place.</option>
        </select>
        <span id="confidenceHelpBlock" class="help-block">How confident are you n your choice?</span>
      </div>
      <div class="form-group">
        <input type="hidden" name="geonameid" value="" id="inputGeonameid">
        <input type="hidden" name="bbox" value="" id="inputBbox">
        <input type="hidden" name="form_source" value="{{form_source}}" id="inputFormSource">
        <button type="submit" class="btn btn-primary btn-default">Add place</button>
      </div>
    </form>
  </div>
  <div class="col-md-6" id="externalResults">
    <h3>Results</h3>
  </div>
  <script>
    $(document).ready(function() {
      $('#searchPlace').submit(function() {
        $.post($(this).attr('action'), $(this).serialize(), function(data){
          $('#externalResults').empty().append(data);
          }, "text");
        return false;
      });
    });
    {{#form_source}}
      $(document).ready(function() {
        $('#addPlace').submit(function() {
          $.post($(this).attr('action'), $(this).serialize(), function(data){
						// add the new place to the search engine.
						var placeName = $('#inputName').val()
            var placeNameString = placeName + " — {" + placeName + "}";
						places.add([placeNameString]);
						$('#inputPlace').val(placeNameString);
            $('.modal-content').empty().append(data);
            }, "text");
          return false;
        });
      });
    {{/form_source}}
  </script>
</div>
